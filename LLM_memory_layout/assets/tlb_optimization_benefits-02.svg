<svg id="b4b4979b-3c94-485e-8f81-3bf638a36b5a" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 470.3"><rect x="11.77" y="19.77" width="1472.17" height="189.28" rx="12.62" style="fill:#1e1e1e;stroke:#f39c12;stroke-width:3px"/><text transform="translate(459.03 51.31)" style="isolation:isolate;font-size:21.031003952026367px;fill:#f39c12;font-family:Arial-BoldMT, Arial;font-weight:700">Why TLB Optimization Multiplies<tspan x="327.13" y="0" style="letter-spacing:-0.01806298992509094em"> </tspan><tspan x="332.59" y="0" style="letter-spacing:-0.07420220539921676em">Y</tspan><tspan x="345.06" y="0">our Performance Gains</tspan></text><text transform="translate(32.8 82.86)" style="isolation:isolate;font-size:16.82480239868164px;fill:#3498db;font-family:Arial-BoldMT, Arial;font-weight:700">TLB <tspan x="37.38" y="0" style="letter-spacing:-0.0742370345816288em">T</tspan><tspan x="46.41" y="0" style="letter-spacing:0.00002902151469180172em">echnical Details:</tspan></text><text transform="translate(43.31 103.89)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• L1<tspan x="23.79" y="0" style="letter-spacing:-0.01803798790765549em"> </tspan><tspan x="27.34" y="0">TLB: 64-128 entries (4KB pages)</tspan></text><text transform="translate(43.31 119.66)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• L2<tspan x="23.79" y="0" style="letter-spacing:-0.01803798790765549em"> </tspan><tspan x="27.34" y="0">TLB: 1024-2048 entries</tspan></text><text transform="translate(43.31 135.44)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• Page size: 4KB (default) or 2MB (huge pages)</text><text transform="translate(43.31 151.21)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• Miss penalty: 100-300 cycles</text><text transform="translate(43.31 166.98)" style="isolation:isolate;font-size:13.670151710510254px;fill:#26de81;font-family:Arial-BoldMT, Arial;font-weight:700">•<tspan x="4.79" y="0" style="letter-spacing:-0.01803798790765549em"> </tspan><tspan x="8.34" y="0" style="letter-spacing:-0.0741879225429712em">Y</tspan><tspan x="16.44" y="0">our approach: Maximize TLB coverage</tspan></text><text transform="translate(43.31 182.76)" style="isolation:isolate;font-size:13.670151710510254px;fill:#26de81;font-family:Arial-BoldMT, Arial;font-weight:700">• Huge pages: Even better TLB utilization!</text><text transform="translate(400.84 82.86)" style="isolation:isolate;font-size:16.82480239868164px;fill:#e74c3c;font-family:Arial-BoldMT, Arial;font-weight:700">Performance Mathematics:</text><text transform="translate(411.35 103.89)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial"><tspan style="letter-spacing:-0.03711182066545358em">T</tspan><tspan x="7.84" y="0">raditional: 50%</tspan><tspan x="98.27" y="0" style="letter-spacing:-0.01803798790765549em"> </tspan><tspan x="101.83" y="0">TLB miss rate</tspan></text><text transform="translate(411.35 119.66)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• 50% × 200 cycles = 100 cycles avg overhead</text><text transform="translate(411.35 135.44)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial"><tspan style="letter-spacing:-0.09179728499539527em">Y</tspan><tspan x="7.86" y="0" style="letter-spacing:0.00003571878793595147em">our approach: 5%</tspan><tspan x="115.78" y="0" style="letter-spacing:-0.018073706695591444em"> </tspan><tspan x="119.33" y="0">TLB miss rate</tspan></text><text transform="translate(411.35 151.21)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• 5% × 200 cycles = 10 cycles avg overhead</text><text transform="translate(411.35 166.98)" style="isolation:isolate;font-size:13.670151710510254px;fill:#26de81;font-family:Arial-BoldMT, Arial;font-weight:700">TLB speedup alone: 10x reduction!</text><text transform="translate(411.35 182.76)" style="isolation:isolate;font-size:13.670151710510254px;fill:#2ed573;font-family:Arial-BoldMT, Arial;font-weight:700">Combined with cache gains: 50-100x total!</text><text transform="translate(768.88 82.86)" style="isolation:isolate;font-size:16.82480239868164px;fill:#9b59b6;font-family:Arial-BoldMT, Arial;font-weight:700">Hardware Synergy:</text><text transform="translate(779.4 103.89)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">•<tspan x="4.79" y="0" style="letter-spacing:-0.018073706695591444em"> </tspan><tspan x="8.34" y="0">TLB prefetcher works with cache prefetcher</tspan></text><text transform="translate(779.4 119.66)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• Sequential pages → predictable pattern</text><text transform="translate(779.4 135.44)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• NUMA-aware allocation helps<tspan x="188.65" y="0" style="letter-spacing:-0.01800226911971954em"> </tspan><tspan x="192.2" y="0" style="letter-spacing:-0.00007143757587190294em">TLB</tspan></text><text transform="translate(779.4 151.21)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• Huge pages reduce<tspan x="127.9" y="0" style="letter-spacing:-0.018073706695591444em"> </tspan><tspan x="131.46" y="0" style="letter-spacing:-0.00007143757587190294em">TLB pressure</tspan></text><text transform="translate(779.4 166.98)" style="isolation:isolate;font-size:13.670151710510254px;fill:#9b59b6;font-family:Arial-BoldMT, Arial;font-weight:700">• Perfect harmony across memory hierarchy</text><text transform="translate(779.4 182.76)" style="isolation:isolate;font-size:13.670151710510254px;fill:#9b59b6;font-family:Arial-BoldMT, Arial;font-weight:700">• Every hardware optimization works together!</text><text transform="translate(1136.92 82.86)" style="isolation:isolate;font-size:16.82480239868164px;fill:#f39c12;font-family:Arial-BoldMT, Arial;font-weight:700">Advanced Optimizations:</text><text transform="translate(1147.44 103.89)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• Use 2MB huge pages (512x fewer<tspan x="215.27" y="0" style="letter-spacing:-0.018073706695591444em"> </tspan><tspan x="218.82" y="0">TLB entries)</tspan></text><text transform="translate(1147.44 119.66)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• madvise(MADV_HUGE<tspan x="150.63" y="0" style="letter-spacing:-0.07422364133090716em">P</tspan><tspan x="158.74" y="0" style="letter-spacing:-0.00007143757587190294em">AGE) for allocation</tspan></text><text transform="translate(1147.44 135.44)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">• NUM<tspan x="39.72" y="0" style="letter-spacing:-0.055221246148980975em">A</tspan><tspan x="48.08" y="0" xml:space="preserve"> topology-aware placement</tspan></text><text transform="translate(1147.44 151.21)" style="isolation:isolate;font-size:13.670151710510254px;fill:#fff;font-family:ArialMT, Arial">•<tspan x="4.79" y="0" style="letter-spacing:-0.018073706695591444em"> </tspan><tspan x="8.34" y="0">TH</tspan><tspan x="26.56" y="0" style="letter-spacing:-0.018073706695591444em">P</tspan><tspan x="35.43" y="0" xml:space="preserve"> (</tspan><tspan x="43.78" y="0" style="letter-spacing:-0.03714753945338953em">T</tspan><tspan x="51.62" y="0">ransparent Huge Pages) support</tspan></text><text transform="translate(1147.44 166.98)" style="isolation:isolate;font-size:13.670151710510254px;fill:#f39c12;font-family:Arial-BoldMT, Arial;font-weight:700">• TLB-aware memory layout design</text><text transform="translate(1147.44 182.76)" style="isolation:isolate;font-size:13.670151710510254px;fill:#f39c12;font-family:Arial-BoldMT, Arial;font-weight:700">•<tspan x="4.79" y="0" style="letter-spacing:-0.018073706695591444em"> </tspan><tspan x="8.34" y="0" style="letter-spacing:-0.07422364133090716em">Y</tspan><tspan x="16.44" y="0" style="letter-spacing:-0.00007143757587190294em">our approach enables all of these!</tspan></text><rect x="11.77" y="230.08" width="1472.17" height="126.19" rx="10.52" style="fill:#2c2c54;stroke:#2ed573;stroke-width:2px"/><text transform="translate(22.28 256.36)" style="isolation:isolate;font-size:14.721702575683594px;fill:#2ed573;font-family:Arial-BoldMT, Arial;font-weight:700">Implementation: TLB-<tspan x="151.3" y="0" style="letter-spacing:-0.018043089692542973em">A</tspan><tspan x="161.67" y="0">ware</tspan><tspan x="195.22" y="0" style="letter-spacing:-0.037114370158006595em"> </tspan><tspan x="198.76" y="0">Allocation</tspan></text><text transform="translate(32.8 277.4)" style="isolation:isolate;font-size:12.61860179901123px;fill:#3498db;font-family:ArialMT, Arial">//<tspan x="7.01" y="0" style="letter-spacing:-0.05517957326734566em"> </tspan><tspan x="9.82" y="0">Allocate with huge pages for optimal</tspan><tspan x="212.54" y="0" style="letter-spacing:-0.01807072981476187em"> </tspan><tspan x="215.82" y="0">TLB utilization</tspan></text><text transform="translate(32.8 293.17)" style="isolation:isolate;font-size:12.61860179901123px;fill:#ffa502;font-family:ArialMT, Arial">void* unified_memory = mmap(NULL, total_size, PROT_READ|PROT_WRITE,</text><text transform="translate(32.8 308.94)" style="isolation:isolate;font-size:12.61860179901123px;fill:#ffa502;font-family:ArialMT, Arial">MAP_PRI<tspan x="55.4" y="0" style="letter-spacing:-0.07421768690516758em">VA</tspan><tspan x="70.36" y="0">TE|MAP_ANONYMOUS|MAP_HUGETLB, -1, 0);</tspan></text><text transform="translate(32.8 324.72)" style="isolation:isolate;font-size:12.61860179901123px;fill:#26de81;font-family:ArialMT, Arial">// Result: 2MB pages → 512x fewer<tspan x="198.48" y="0" style="letter-spacing:-0.01807072981476187em"> </tspan><tspan x="201.76" y="0">TLB entries needed!</tspan></text><text transform="translate(32.8 340.49)" style="isolation:isolate;font-size:12.61860179901123px;fill:#26de81;font-family:ArialMT, Arial">// Perfect sequential access →<tspan x="170.43" y="0" style="letter-spacing:-0.01807072981476187em"> </tspan><tspan x="173.71" y="0">TLB prefetcher works optimally</tspan></text><rect x="169.5" y="377.29" width="1156.71" height="84.12" rx="12.62" style="fill:#34495e;stroke:#f39c12;stroke-width:3px"/><text transform="translate(512.25 408.84)" style="isolation:isolate;font-size:18.927902221679688px;fill:#f39c12;font-family:Arial-BoldMT, Arial;font-weight:700">The Complete Memory Hierarchy Optimization Stack</text><g style="isolation:isolate"><text transform="translate(481.36 435.13)" style="isolation:isolate;font-size:16.82480239868164px;fill:#2ed573;font-family:Arial-BoldMT, Arial;font-weight:700">Cache + TLB + Prefetch + SIMD + DS<tspan x="292.66" y="0" style="letter-spacing:-0.0370894957761226em">A</tspan></text><text transform="translate(786.17 435.13)" style="font-size:16.82480239868164px;fill:#fff;font-family:ArialMT, Arial"><tspan xml:space="preserve"> all working in perfect harmony</tspan></text></g></svg>