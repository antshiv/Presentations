<svg id="ae0ef956-e1f0-41c7-bffc-9d79c6d1d39c" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 443.96"><rect x="50" y="28" width="600" height="160" rx="8" style="fill:#1e3a8a;stroke:#3b82f6;stroke-width:2px"/><text transform="translate(70 53)" style="isolation:isolate;font-size:18px;fill:#2196f3;font-family:ArialMT, Arial">✨<tspan x="13.5" y="0" xml:space="preserve" style="font-family:CourierNewPS-BoldMT, Courier New;font-weight:700"> Quick Start (No Code Changes)</tspan></text><text transform="translate(70 73)" style="isolation:isolate;font-size:12px;fill:#fff;font-family:CourierNewPSMT, Courier New">Test NUMA effects without embedding libnuma:</text><rect x="80" y="83" width="540" height="90" rx="4" style="fill:#1a1a2e;stroke:#40407a"/><text transform="translate(90 98)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New"># Run on specific NUMA node:</text><text transform="translate(90 113)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">numactl --cpunodebind=0 --membind=0 ./llm_demo</text><text transform="translate(90 133)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New"># Split across multiple nodes:</text><text transform="translate(90 148)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">numactl --cpunodebind=0 --membind=0 ./worker_0 &amp;</text><text transform="translate(90 163)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">numactl --cpunodebind=1 --membind=1 ./worker_1 &amp;</text><rect x="670" y="28" width="680" height="160" rx="8" style="fill:#2c2c54;stroke:#4caf50;stroke-width:2px"/><rect x="700" y="68" width="150" height="15" style="fill:#3742fa;fill-opacity:0.30000001192092896"/><text transform="translate(710 80)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">libnuma (-lnuma)</text><text transform="translate(860 80)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Minimal, ships with every Linux distro</text><rect x="700" y="88" width="150" height="15" style="fill:#ff9800;fill-opacity:0.30000001192092896"/><text transform="translate(710 100)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">hwloc</text><text transform="translate(860 100)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Portable tree of sockets/cores, JSON output</text><rect x="700" y="108" width="150" height="15" style="fill:#9c27b0;fill-opacity:0.30000001192092896"/><text transform="translate(710 120)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">OpenMP</text><text transform="translate(860 120)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">OMP_PLACES=numa:0,1,2 + OMP_PROC_BIND=close</text><rect x="700" y="128" width="150" height="15" style="fill:#4caf50;fill-opacity:0.30000001192092896"/><text transform="translate(710 140)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">TBB/oneTBB</text><text transform="translate(860 140)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">NUMA-aware task arenas, VTune integration</text><rect x="700" y="148" width="150" height="15" style="fill:#f44336;fill-opacity:0.30000001192092896"/><text transform="translate(710 160)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Intel oneAPI</text><text transform="translate(860 160)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Full ecosystem: compiler + libraries + tools</text><rect x="50" y="208" width="1300" height="180" rx="8" style="fill:#2c2c54;stroke:#f44336;stroke-width:2px"/><text transform="translate(70 233)" style="isolation:isolate;font-size:18px;fill:#f44336;font-family:MyriadPro-Regular, Myriad Pro">⚠️<tspan x="9" y="0" xml:space="preserve" style="font-family:CourierNewPS-BoldMT, Courier New;font-weight:700"> Common Pitfalls &amp; Fixes</tspan></text><rect x="80" y="253" width="380" height="120" rx="4" style="fill:#f44336;fill-opacity:0.10000000149011612;stroke:#f44336"/><text transform="translate(90 273)" style="isolation:isolate;font-size:12px;fill:#f44336;font-family:ArialMT, Arial">❌<tspan x="9" y="0" xml:space="preserve" style="font-family:CourierNewPSMT, Courier New"> Huge-page allocation fails</tspan></text><text transform="translate(90 293)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Symptom: ENOMEM error</text><text transform="translate(90 308)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">You forgot to reserve huge pages</text><text transform="translate(90 328)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">echo 4096 &gt; /proc/sys/vm/nr_hugepages</text><text transform="translate(90 343)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">or boot with hugepagesz=1G</text><text transform="translate(90 358)" style="isolation:isolate;font-size:10px;fill:#4caf50;font-family:ArialMT, Arial">✅<tspan x="7.5" y="0" xml:space="preserve" style="font-family:CourierNewPSMT, Courier New"> Reserve pages at boot time</tspan></text><rect x="480" y="253" width="380" height="120" rx="4" style="fill:#ff9800;fill-opacity:0.10000000149011612;stroke:#ff9800"/><text transform="translate(490 273)" style="isolation:isolate;font-size:12px;fill:#ff9800;font-family:ArialMT, Arial">❌<tspan x="9" y="0" xml:space="preserve" style="font-family:CourierNewPSMT, Courier New"> Pages end up remote</tspan></text><text transform="translate(490 293)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Symptom: VTune &quot;Remote DRAM&quot; spikes</text><text transform="translate(490 308)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Thread that faults page not pinned</text><text transform="translate(490 328)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">mbind(..., MPOL_MF_STRICT)</text><text transform="translate(490 343)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">Pin BEFORE first access</text><text transform="translate(490 358)" style="isolation:isolate;font-size:10px;fill:#4caf50;font-family:ArialMT, Arial">✅<tspan x="7.5" y="0" xml:space="preserve" style="font-family:CourierNewPSMT, Courier New"> Pin threads before allocation</tspan></text><rect x="880" y="253" width="380" height="120" rx="4" style="fill:#9c27b0;fill-opacity:0.10000000149011612;stroke:#9c27b0"/><text transform="translate(890 273)" style="isolation:isolate;font-size:12px;fill:#fff;font-family:ArialMT, Arial">❌<tspan x="9" y="0" xml:space="preserve" style="font-family:CourierNewPSMT, Courier New"> False sharing after split</tspan></text><text transform="translate(890 293)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Symptom: L1/L2 bandwidth stalls</text><text transform="translate(890 308)" style="isolation:isolate;font-size:10px;fill:#ccc;font-family:CourierNewPSMT, Courier New">Token boundaries cross cache lines</text><text transform="translate(890 328)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">Use padding trick (round to 64B)</text><text transform="translate(890 343)" style="isolation:isolate;font-size:11px;fill:#ffe082;font-family:CourierNewPSMT, Courier New">padded = align_up(size, 64)</text><text transform="translate(890 358)" style="isolation:isolate;font-size:10px;fill:#4caf50;font-family:ArialMT, Arial">✅<tspan x="7.5" y="0" xml:space="preserve" style="font-family:CourierNewPSMT, Courier New"> Cache-line aligned tokens</tspan></text><rect x="200" y="424.26" width="1000" height="2.08" style="fill:#4caf50"/><rect x="50" y="393" width="300" height="20.84" style="fill:#4caf50;fill-opacity:0.20000000298023224"/><text transform="translate(133.99 407)" style="isolation:isolate;font-size:10px;fill:#4caf50;font-family:CourierNewPSMT, Courier New">30-50 lines of C total</text><rect x="370" y="393" width="300" height="20.84" style="fill:#2196f3;fill-opacity:0.20000000298023224"/><text transform="translate(429.99 407)" style="isolation:isolate;font-size:10px;fill:#2196f3;font-family:CourierNewPSMT, Courier New">layout_transformer() unchanged</text><rect x="690" y="393" width="300" height="20.84" style="fill:#ffc107;fill-opacity:0.20000000298023224"/><text transform="translate(770.99 407)" style="isolation:isolate;font-size:10px;fill:#ff9800;font-family:CourierNewPSMT, Courier New">Test with numactl first</text><rect x="1010" y="393" width="300" height="20.84" style="fill:#9c27b0;fill-opacity:0.20000000298023224"/><text transform="translate(1081.99 407)" style="isolation:isolate;font-size:10px;fill:#a200c9;font-family:CourierNewPSMT, Courier New">Profile to verify benefits</text></svg>